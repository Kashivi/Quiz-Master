<!DOCTYPE html>
<html>
<head>
    <title>Quiz Summary Report</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='add_subject.css') }}">
    <style>
        /* Remove default body margin and padding */
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        /* Centered Title at the top */
        h2 {
            text-align: center;
            margin-top: 20px; /* Space between the top of the page and title */
            font-size: 2rem;
            color: #333;
        }
        
        /* Centering the table */
        table {
            width: 80%; /* Adjust width of the table */
            border-collapse: collapse;
            margin: 20px auto; /* Centers the table horizontally and adds margin from the top */
            background-color: white;
        }
        
        th, td {
            border: 1px solid black;
            padding: 10px;
            text-align: center;
        }
        
        th {
            background-color: #f2f2f2;
        }

        /* Ensure the table is centered vertically within the body */
        .container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Align items at the top */
        }
        .btn-dashboard {
            border: 2px solid black;  /* Black border */
            background-color: white;   /* White background */
            color: black;              /* Black text color */
            padding: 10px 20px;        /* Padding around the button */
            font-size: 1rem;           /* Font size */
            text-align: center;        /* Center align text */
            text-decoration: none;     /* Remove underline from link */
            border-radius: 5px;        /* Rounded corners */
            display: inline-block;     /* Allow the button to behave like a block element */
            margin: 20px auto;         /* Center it with a margin */
        }

        .btn-dashboard:hover {
            background-color: black;   
            color: white;              
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Centered Title -->
        <h2>Quiz Summary Report</h2>
        
        <!-- Quiz Summary Table -->
        <table>
            <tr>
                <th>User Name</th>
                <th>Quiz Name (Chapter)</th>
                <th>Total Attempts</th>
                <th>Best Score</th>
                <th>Average Score</th>
                <th>Total Possible Score</th>
            </tr>
            {% for row in summary %}
            <tr>
                <td>{{ row.user_name }}</td>
                <td>{{ row.quiz_name }} ({{ row.chapter_name }})</td> <!-- Added chapter name here -->
                <td>{{ row.total_attempts }}</td>
                <td>{{ row.best_score }}</td>
                <td>{{ "%.2f"|format(row.average_score) }}</td>
                <td>{{ row.total_possible_score }}</td>
            </tr>
            {% endfor %}
        </table>

        <a href="{{ url_for('user_dashboard') }}" class="btn-dashboard">
            <i class="bi bi-plus-circle me-2"></i>
                User Dashboard
        </a>
    </div>
</body>
</html>
